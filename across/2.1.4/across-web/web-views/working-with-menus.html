<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Working with menus - Across</title>
    <meta name="generator" content="Antora 2.1.1">
    <link rel="stylesheet" href="../../../../_/css/site.css">
<link href="https://fonts.googleapis.com/css?family=Open+Sans:300,400,600,700,800" rel="stylesheet">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/docsearch.js@2/dist/cdn/docsearch.min.css" />
<script type="text/javascript" src="https://cdn.jsdelivr.net/npm/docsearch.js@2/dist/cdn/docsearch.min.js"></script>
<meta name="og:title" content="Across Documentation"/>
<meta name="og:image" content="https://across.foreach.be/across/resources/static/acrossWebsite/img/og-image-across.jpg"/>
<link rel="icon" type="image/png" sizes="16x16" href="https://across.foreach.be/across/resources/static/acrossWebsite/img/favicon/favicon-16x16.png"/>
<link rel="icon" type="image/png" sizes="32x32" href="https://across.foreach.be/across/resources/static/acrossWebsite/img/favicon/favicon-32x32.png"/>
<link rel="icon" type="image/png" sizes="96x96" href="https://across.foreach.be/across/resources/static/acrossWebsite/img/favicon/favicon-96x96.png"/>
<link rel="apple-touch-icon" type="image/png" href="https://across.foreach.be/across/resources/static/acrossWebsite/img/favicon/apple-icon-120x120.png"/>
<link rel="apple-touch-icon" type="image/png" sizes="152x152" href="https://across.foreach.be/across/resources/static/acrossWebsite/img/favicon/apple-icon-152x152.png"/>
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="https://across.foreach.be/across/resources/static/acrossWebsite/img/favicon/apple-icon-180x180.png"/>
  </head>
  <body class="article">
<header class="header" role="banner">
  <div class="m-mobile-menu__button js-overlay-menu-button" data-target="mobile-menu">
    <span class="m-mobile-menu__line"></span>
    <span class="m-mobile-menu__line"></span>
    <span class="m-mobile-menu__line"></span>
  </div>

  <div class="m-mobile-menu">
    <div class="m-mobile-menu__logo">
      <a class="m-nav__logo" href="/">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 82.9 95.7">
          <title>logo-across</title>
          <path fill="#3CA873" d="M0 23.9l15.9-9.2 41.5 23.9-16 9.2"></path>
          <path fill="#0093D8" d="M25.5 9.2L41.4 0l41.5 23.9-16 9.2"></path>
          <path fill="#53DD99" d="M41.4 95.7l16-9.3V38.6l-16 9.2"></path>
          <path fill="#22CEFA" d="M66.9 80.9l16-9.2V23.9l-16 9.2"></path>
          <path fill="#257A50" d="M12.5 64.5L28.9 55l-16.4-9.4"></path>
          <path fill="#4DBC86" d="M12.5 64.5L28.9 74V55"></path>
        </svg>
        <span>Across</span>
      </a>
    </div>
  </div>
  <div class="m-mobile-menu__container js-mobile-menu-overlay" id="mobile-menu">
    <nav class="m-mobile-menu__list">
      <a href="https://across.foreach.be/blog">Blog</a>
      <a href="https://across.foreach.be/documentation" class="is-active">Docs</a>
      <a href="https://across.foreach.be/modules">Modules</a>
      <a href="https://across.foreach.be/faq">FAQ</a>
      <a href="http://start-across.foreach.be">Get started</a>
    </nav>
  </div>
  <nav class="m-nav is-sticky">
    <a class="m-nav__logo" href="../../../..">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 82.9 95.7">
        <title>logo-across</title>
        <path fill="#3CA873" d="M0 23.9l15.9-9.2 41.5 23.9-16 9.2"></path>
        <path fill="#0093D8" d="M25.5 9.2L41.4 0l41.5 23.9-16 9.2"></path>
        <path fill="#53DD99" d="M41.4 95.7l16-9.3V38.6l-16 9.2"></path>
        <path fill="#22CEFA" d="M66.9 80.9l16-9.2V23.9l-16 9.2"></path>
        <path fill="#257A50" d="M12.5 64.5L28.9 55l-16.4-9.4"></path>
        <path fill="#4DBC86" d="M12.5 64.5L28.9 74V55"></path>
      </svg>
      <span>Across</span>
    </a>

    <div class="m-nav__link-group">
      <a href="https://across.foreach.be/blog">Blog</a>
      <a href="https://across.foreach.be/documentation" class="is-active">Docs</a>
      <a href="https://across.foreach.be/modules">Modules</a>
      <a href="https://across.foreach.be/faq">FAQ</a>
      <a href="http://start-across.foreach.be">Get started</a>
    </div>
  </nav>
</header>
<div class="main-wrapper">
<div class="navigation-container" data-component="across" data-version="2.1.4">
  <aside class="navigation">
    <div class="panels">
      <div id="search-box" class="search-box is-active">
        <input id="search-input" type="text" placeholder="Search the documentation">
      </div>
      <div class="navigation-menu is-active" data-panel="menu">
  <nav class="nav-menu">
    <h3 class="title"><a href="../../index.html">Across Platform</a></h3>
<ul class="nav-list">
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../../in-a-nutshell.html">Across in a Nutshell</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-toggle"></button>
    <a class="nav-link" href="../../releases/index.html">Releases</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../releases/platform/current-release.html">Current release</a>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-toggle"></button>
    <a class="nav-link" href="../../releases/platform/release-notes.html">Release notes</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <button class="nav-toggle"></button>
    <a class="nav-link" href="../../releases/platform/2.1.x.html">2.1.x</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../../releases/platform/2.1.4.html">2.1.4</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../../releases/platform/2.1.3.html">2.1.3</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../../releases/platform/2.1.2.html">2.1.2</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../../releases/platform/2.1.1.html">2.1.1</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../../releases/platform/2.1.0.html">2.1.0</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-toggle"></button>
    <a class="nav-link" href="../../releases/core-artifacts/index.html">Core Artifacts</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../releases/core-artifacts/releases-3.x.html">3.x</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../releases/core-artifacts/releases-2.x.html">2.x</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../releases/core-artifacts/releases-1.x.html">1.x</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../../../migration/index.html">Migration guides</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-toggle"></button>
    <a class="nav-link" href="../../developing-applications/creating-an-application/index.html">Developing applications</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <button class="nav-toggle"></button>
    <a class="nav-link" href="../../developing-applications/creating-an-application/index.html">Creating an application</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../developing-applications/creating-an-application/application-descriptor.html">Application descriptor</a>
  </li>
  <li class="nav-item" data-depth="3">
    <button class="nav-toggle"></button>
    <a class="nav-link" href="../../developing-applications/creating-an-application/project-structure.html">Project structure</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../../developing-applications/creating-an-application/project-structure.html#application-module">Application module</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../../developing-applications/creating-an-application/project-structure.html#application-resources">Application resources</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-toggle"></button>
    <a class="nav-link" href="../../developing-applications/application-configuration.html">Application configuration</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../developing-applications/application-configuration.html#configuration-properties">Configuration properties</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../developing-applications/application-configuration.html#application-profiles">Application profiles</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-toggle"></button>
    <a class="nav-link" href="../../developing-applications/adding-modules.html">Adding modules</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../developing-applications/adding-modules.html#conditional-modules">Conditional modules</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-toggle"></button>
    <a class="nav-link" href="../../developing-applications/interacting-with-modules.html">Interacting with modules</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../developing-applications/interacting-with-modules.html#using-components">Using components from modules</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../developing-applications/interacting-with-modules.html#working-with-events">Working with events</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../developing-applications/connecting-to-a-database.html">Connecting to a database</a>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-toggle"></button>
    <a class="nav-link" href="../../developing-applications/application-bootstrap.html">Application bootstrap</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../developing-applications/extend-module-configuration.html">Customizing modules before starting</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-toggle"></button>
    <a class="nav-link" href="../../developing-applications/initializing-data/index.html">Initializing application data</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../developing-applications/initializing-data/creating-database-schema.html">Creating database schema</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../developing-applications/development-mode.html">Development mode</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../developing-applications/messages.html">Localization and translations</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../developing-applications/testing.html">Testing your application</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../developing-applications/default-modules.html">Default modules in an application</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../developing-applications/default-components.html">Default components</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../developing-applications/application-deploy.html">Deploying your application</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-toggle"></button>
    <a class="nav-link" href="../../developing-modules/creating-a-module/index.html">Developing modules</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <button class="nav-toggle"></button>
    <a class="nav-link" href="../../developing-modules/creating-a-module/index.html">Creating a reusable module</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../developing-modules/creating-a-module/module-descriptor.html">Module descriptor</a>
  </li>
  <li class="nav-item" data-depth="3">
    <button class="nav-toggle"></button>
    <a class="nav-link" href="../../developing-modules/creating-a-module/project-structure.html">Project structure</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../../developing-modules/creating-a-module/project-structure.html#module-resources">Module resources</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../developing-modules/creating-a-module/extracting-from-application.html">Extracting a module from your application</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-toggle"></button>
    <a class="nav-link" href="../../developing-modules/module-dependencies/index.html">Module dependencies</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../developing-modules/module-dependencies/sharing-components.html">Using components from other modules</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../developing-modules/module-dependencies/sharing-components.html#exposing-beans">Exposing components for other modules</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../developing-modules/module-dependencies/module-order-explained.html">Module order explained</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../developing-modules/module-dependencies/refreshing.html">Solving order related problems</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../developing-modules/configuration-properties.html">Using configuration properties</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../developing-modules/installers.html">Installers</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../developing-modules/events.html">Events</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../developing-modules/messages.html">Messages and localized data</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../developing-modules/extending-modules.html">Extending other modules</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../developing-modules/development-mode.html">Providing developer features</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../developing-modules/testing.html">Testing your module</a>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-toggle"></button>
    <a class="nav-link" href="../../developing-modules/distributing.html">Distributing your module</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../developing-modules/distributing.html#versioning">Versioning</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../developing-modules/best-practices.html">Best practices</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-toggle"></button>
    <a class="nav-link" href="../index.html">Across Web</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <button class="nav-toggle"></button>
    <a class="nav-link" href="../basic-features/index.html">Basic features</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../basic-features/spring-mvc-support.html">Spring MVC support</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../basic-features/view-engines.html">View engines</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../basic-features/servlets-and-filters.html">Registering servlets and filters</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../basic-features/error-pages.html">Error pages</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../basic-features/custom-request-mapping-support.html">Custom request mappings</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-toggle"></button>
    <a class="nav-link" href="../configuration/index.html">Configuration options</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../configuration/module-settings.html">Module settings</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../configuration/http-encoding.html">Default HTTP encoding</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../configuration/multipart-support.html">Multipart support</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../configuration/resource-versioning.html">Resource caching and versioning</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-toggle"></button>
    <a class="nav-link" href="index.html">Building web pages</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <button class="nav-toggle"></button>
    <a class="nav-link" href="static-resources.html">Static resources</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="webjars.html">Webjars support</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="links-and-urls.html">Links and URLs</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="web-resources.html">Web resources</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="layout-templates.html">Layout templates</a>
  </li>
  <li class="nav-item is-current-page" data-depth="3">
    <a class="nav-link" href="working-with-menus.html">Working with menus</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="view-elements.html">ViewElement infrastructure</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="partial-rendering.html">Partial view rendering</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="localized-text.html">Localizing text</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../thymeleaf-dialect.html">Thymeleaf dialect</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../development-mode.html">Development mode support</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../published-events.html">Published events</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-toggle"></button>
    <a class="nav-link" href="../../testing/index.html">Testing</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../testing/application-testing.html">Application testing</a>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-toggle"></button>
    <a class="nav-link" href="../../testing/module-testing.html">Module testing</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../testing/test-context-builders.html">Testing bootstrap combinations</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../testing/test-dynamic-modules.html">Test an Application module</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../testing/expose-for-test.html">Exposing components for tests</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../testing/test-datasources.html">Test datasources</a>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-toggle"></button>
    <a class="nav-link" href="../../testing/testing-web-features.html">Testing web features</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../testing/mock-mvc.html">Web requests using MockMvc</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../testing/mock-across-servlet-context.html">Filter and servlet registration</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../testing/view-element-rendering.html">View element rendering</a>
  </li>
</ul>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../../cheat-sheet.html">Cheat Sheet</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../../spring-boot-compatibility.html">Spring Boot compatibility</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../../glossary.html">Glossary</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../../../../guides/5.1.0-SNAPSHOT/index.html">Application guides</a>
  </li>
</ul>
  </li>
</ul>
  </nav>
</div>
      <div class="navigation-explore" data-panel="explore">
  <div class="context">
    <span class="title">Across Platform</span>
    <span class="version">2.1.4</span>
  </div>
  <ul class="components">
    <li class="component is-current">
      <span class="title">Across Platform</span>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../../index.html">master</a>
        </li>
        <li class="version">
          <a href="../../../2.1.5/index.html">2.1.5</a>
        </li>
        <li class="version is-current">
          <a href="../../index.html">2.1.4</a>
        </li>
        <li class="version">
          <a href="../../../2.1.3/index.html">2.1.3</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <span class="title">Application Guides</span>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../../../guides/5.1.0-SNAPSHOT/index.html">5.1.0-SNAPSHOT</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <span class="title">Auto-configuration Support</span>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../../../across-autoconfigure/index.html">master</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <span class="title">Migration guides</span>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../../../migration/index.html">master</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <span class="title">Module: Admin Web</span>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../../../admin-web-module/index.html">master</a>
        </li>
        <li class="version">
          <a href="../../../../admin-web-module/3.2.0/index.html">3.2.0</a>
        </li>
        <li class="version">
          <a href="../../../../admin-web-module/3.1.1/index.html">3.1.1</a>
        </li>
        <li class="version">
          <a href="../../../../admin-web-module/3.1.0/index.html">3.1.0</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <span class="title">Module: Application Info</span>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../../../application-info-module/index.html">master</a>
        </li>
        <li class="version">
          <a href="../../../../application-info-module/1.0.1/index.html">1.0.1</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <span class="title">Module: Batch Processing</span>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../../../spring-batch-module/index.html">master</a>
        </li>
        <li class="version">
          <a href="../../../../spring-batch-module/1.0.2/index.html">1.0.2</a>
        </li>
        <li class="version">
          <a href="../../../../spring-batch-module/1.0.1/index.html">1.0.1</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <span class="title">Module: Bootstrap UI</span>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../../../bootstrap-ui-module/index.html">master</a>
        </li>
        <li class="version">
          <a href="../../../../bootstrap-ui-module/2.2.2/index.html">2.2.2</a>
        </li>
        <li class="version">
          <a href="../../../../bootstrap-ui-module/2.2.1/index.html">2.2.1</a>
        </li>
        <li class="version">
          <a href="../../../../bootstrap-ui-module/2.1.1/index.html">2.1.1</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <span class="title">Module: Caching - Ehcache</span>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../../../ehcache-module/index.html">master</a>
        </li>
        <li class="version">
          <a href="../../../../ehcache-module/1.0.1/index.html">1.0.1</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <span class="title">Module: Debug Web</span>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../../../debug-web-module/index.html">master</a>
        </li>
        <li class="version">
          <a href="../../../../debug-web-module/2.0.0/index.html">2.0.0</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <span class="title">Module: Documents & Forms</span>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../../../dynamic-forms-module/index.html">master</a>
        </li>
        <li class="version">
          <a href="../../../../dynamic-forms-module/0.0.3/index.html">0.0.3</a>
        </li>
        <li class="version">
          <a href="../../../../dynamic-forms-module/0.0.2/index.html">0.0.2</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <span class="title">Module: Entity Management</span>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../../../entity-module/index.html">master</a>
        </li>
        <li class="version">
          <a href="../../../../entity-module/3.4.0/index.html">3.4.0</a>
        </li>
        <li class="version">
          <a href="../../../../entity-module/3.3.0/index.html">3.3.0</a>
        </li>
        <li class="version">
          <a href="../../../../entity-module/3.2.0/index.html">3.2.0</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <span class="title">Module: File Management</span>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../../../file-manager-module/index.html">master</a>
        </li>
        <li class="version">
          <a href="../../../../file-manager-module/2.1.0-SNAPSHOT/index.html">2.1.0-SNAPSHOT</a>
        </li>
        <li class="version">
          <a href="../../../../file-manager-module/1.4.0/index.html">1.4.0</a>
        </li>
        <li class="version">
          <a href="../../../../file-manager-module/1.3.0/index.html">1.3.0</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <span class="title">Module: Hibernate JPA</span>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../../../hibernate-jpa-module/index.html">master</a>
        </li>
        <li class="version">
          <a href="../../../../hibernate-jpa-module/3.0.0/index.html">3.0.0</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <span class="title">Module: LDAP Support</span>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../../../ldap-module/index.html">master</a>
        </li>
        <li class="version">
          <a href="../../../../ldap-module/1.0.1/index.html">1.0.1</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <span class="title">Module: Logging</span>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../../../logging-module/index.html">master</a>
        </li>
        <li class="version">
          <a href="../../../../logging-module/1.1.0/index.html">1.1.0</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <span class="title">Module: Mobile Support</span>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../../../spring-mobile-module/index.html">master</a>
        </li>
        <li class="version">
          <a href="../../../../spring-mobile-module/2.0.0/index.html">2.0.0</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <span class="title">Module: Properties</span>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../../../properties-module/index.html">master</a>
        </li>
        <li class="version">
          <a href="../../../../properties-module/1.1.1/index.html">1.1.1</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <span class="title">Module: Security</span>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../../../spring-security-module/index.html">master</a>
        </li>
        <li class="version">
          <a href="../../../../spring-security-module/4.1.0-SNAPSHOT/index.html">4.1.0-SNAPSHOT</a>
        </li>
        <li class="version">
          <a href="../../../../spring-security-module/3.0.2/index.html">3.0.2</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <span class="title">Module: Security - ACLs</span>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../../../spring-security-acl-module/4.1.0-SNAPSHOT/index.html">4.1.0-SNAPSHOT</a>
        </li>
        <li class="version">
          <a href="../../../../spring-security-acl-module/3.0.2/index.html">3.0.2</a>
        </li>
        <li class="version">
          <a href="../../../../spring-security-acl-module/3.0.1/index.html">3.0.1</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <span class="title">Module: Security - OAuth2</span>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../../../oauth2-module/index.html">master</a>
        </li>
        <li class="version">
          <a href="../../../../oauth2-module/2.1.1/index.html">2.1.1</a>
        </li>
        <li class="version">
          <a href="../../../../oauth2-module/2.1.0/index.html">2.1.0</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <span class="title">Module: User Management</span>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../../../user-module/index.html">master</a>
        </li>
        <li class="version">
          <a href="../../../../user-module/4.1.0-SNAPSHOT/index.html">4.1.0-SNAPSHOT</a>
        </li>
        <li class="version">
          <a href="../../../../user-module/3.1.1/index.html">3.1.1</a>
        </li>
        <li class="version">
          <a href="../../../../user-module/3.1.0/index.html">3.1.0</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <span class="title">Module: Web CMS</span>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../../../web-cms-module/index.html">master</a>
        </li>
        <li class="version">
          <a href="../../../../web-cms-module/0.0.7/index.html">0.0.7</a>
        </li>
        <li class="version">
          <a href="../../../../web-cms-module/0.0.6/index.html">0.0.6</a>
        </li>
      </ul>
    </li>
  </ul>
</div>
    </div>
    <script>
      var indexName = window.location.href.indexOf('across-site/production/')>0 ? 'antora-across-site-production' : 'antora-across-site-preview';
      docsearch({
                  appId: 'YNK2RERBV5',
                  apiKey: '201d66bbf44a6c62002472e491d74568',
                  indexName: indexName,
                  inputSelector: '#search-input',
                  algoliaOptions: { hitsPerPage: 10 }
                })
    </script>
  </aside>
</div>
  <main class="main">
<div class="toolbar" role="navigation">
  <button class="navigation-toggle"></button>
  <a href="../../../index.html" class="home-link"></a>
<nav class="crumbs" aria-label="breadcrumbs">
  <ul>
    <li class="crumb"><a href="../../index.html">Across Platform</a></li>
    <li class="crumb"><a href="../index.html">Across Web</a></li>
    <li class="crumb"><a href="index.html">Building web pages</a></li>
    <li class="crumb"><a href="working-with-menus.html">Working with menus</a></li>
  </ul>
</nav>
<div class="page-versions">
  <button class="versions-menu-toggle" title="Show other versions of page">2.1.4</button>
  <div class="versions-menu">
    <a class="version" href="../../../across-web/web-views/working-with-menus.html">master</a>
    <a class="version" href="../../../2.1.5/across-web/web-views/working-with-menus.html">2.1.5</a>
    <a class="version is-current" href="working-with-menus.html">2.1.4</a>
    <a class="version" href="../../../2.1.3/across-web/web-views/working-with-menus.html">2.1.3</a>
  </div>
</div>
  <div class="edit-this-page"><a href="https://github.com/ForeachOS/ax-docs-across/blob/2.1.4/docs/modules/across-web/pages/web-views/working-with-menus.adoc">Edit this Page</a></div>
</div>
<article class="doc"><a name="section-top"></a>
      <h1>Working with menus</h1>
    <div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p>Several standard modules like <a href="https://across.dev/modules/AdminWebModule">AdminWebModule</a>, <a href="https://across.dev/modules/EntityModule">EntityModule</a> or <a href="https://across.dev/modules/BootstrapUiModule">BootstrapUiModule</a> use these features to allow creation, customization and easy rendering of menus.
In this section we will explain the basics of working with the Across Web menu features.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_creating_a_menu"><a class="anchor" href="#_creating_a_menu"></a>Creating a menu</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The base class for the menu tree structure is <code>com.foreach.across.modules.web.menu.Menu</code>.
A single <code>Menu</code> can have several child <code>Menu</code> items, which in turn can have children of their own.
As such, a <code>Menu</code> can optionally have a single parent <code>Menu</code>.
The top-most item without a parent is called the <em>root</em> of the menu tree.</p>
</div>
<div class="listingblock">
<div class="title">Example menu tree</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-text hljs" data-lang="text">ROOT
+ l1: item one
  - l2: item one
  + l2: item two
    - l3: item one
- l1: item two</code></pre>
</div>
</div>
<div class="paragraph">
<p>The <code>Menu</code> class has some properties that are common for visual menu rendering, like a <code>title</code> and an <code>url</code>.
Every <code>Menu</code> also has a <code>path</code> property which is usually used to uniquely identify an item inside the entire menu tree.</p>
</div>
<div class="paragraph">
<p>Apart from some other direct properties, every <code>Menu</code> has an <code>attributes</code> property which is a <code>Map</code> of custom key/value pairs.
These can be used to store additional custom information on a menu item, something which is used by many implementation.</p>
</div>
<div class="paragraph">
<p>Suppose you have a menu item that links to a web page, backed by a <code>WebPage</code> object.
You could put the title of the web page as the <code>Menu</code> title, and the url to the request path where the page is served.
The <code>attributes</code> collection could then hold the actual <code>WebPage</code> instance that the menu item represents.</p>
</div>
<div class="paragraph">
<p>The following table gives a short overview of the different <code>Menu</code> properties:</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 1. Menu property descriptions</caption>
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 66.6667%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Property</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>parent</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Holds the optional parent <code>Menu</code> that owns the current menu.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>name</code>, <code>path</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Properties mainly used to identify a <code>Menu</code> in its subtree.
See <a href="#building-a-menu">path based menu building</a> for a common use of the <code>path</code> property.
The <code>name</code> property is mostly relevant for the top-most <code>Menu</code> when <a href="#publishing-a-menu">publishing a menu</a>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>title</code>, <code>url</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Common (visualization) metadata for a <code>Menu</code> item.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>attributes</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Map</code> of custom attributes attached to this <code>Menu</code>.
The value of an attribute is artibitrary, but every attribute is identified by a unique <code>String</code> key.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>group</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">This flag is mostly used to indicate an item that has children, but is not a regular item in itself.
Though implementation dependent, this is often used for an item that for example has no url set (and would not be clickable), but is still expected to be a heading in a visualized menu tree.</p>
<p class="tableblock">Note that the value of <code>group</code> has no impact on the actual presence of child items.
Child items are represented by the <code>items</code> property and related methods.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>order</code>, <code>comparator</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Properties to influence how a menu tree should be sorted.
See <a href="#sorting-a-menu">the section on sorting a menu</a> for more information.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>selected</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Indicates if the <code>Menu</code> item is part of the selected path of the menu tree.
See <a href="#selecting-menu-items">the section on selecting menu items</a> for more information.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>disabled</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Indicates if a <code>Menu</code> item is considered disabled.
This usually implies the entire sub-tree the item represents is disabled.
The meaning of disabled is application dependant, but usually it means the menu item is still part of the tree but should not be shown.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>items</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Contains the list of direct children of this <code>Menu</code>.</p></td>
</tr>
</tbody>
</table>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
How the different properties of a <code>Menu</code> are being used is entirely up to the developer.
<code>Menu</code> in itself is nothing more than a class structure for representing a tree of items with those properties.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>A <code>Menu</code> can be constructed and modified directly, it is never an immutable instance.</p>
</div>
<div class="listingblock">
<div class="title">Example of simple menu creation</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">Menu root = new Menu( "ROOT" );
Menu childOne = new Menu( "l1: item one" );
Menu childOfChildOne = new Menu( "l2: item one" );
Menu childTwo = new Menu( "l1: item two" );

root.addItem( childOne );
root.addItem( childTwo );
childOne.addItem( childOfChildOne );</code></pre>
</div>
</div>
<div class="paragraph">
<p>Because of the hierarchical nature of a menu however, usually constructing a complex <code>Menu</code> is done using a <a href="#building-a-menu">path based builder</a>.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="sorting-a-menu"><a class="anchor" href="#sorting-a-menu"></a>Sorting a menu</h2>
<div class="sectionbody">
<div class="paragraph">
<p>A <code>Menu</code> can be sorted once its items have been added, simply by calling the <code>sort()</code> method.
Sorting a menu will sort its direct child items, and in turn call <code>sort()</code> on every child item, resulting in the entire menu tree being sorted.</p>
</div>
<div class="paragraph">
<p>Sorting is done using a <code>Comparator&lt;Menu&gt;</code> instance.
The default comparator will sort menu items first on the value of their <code>order</code> property, and then alphabetically on their <code>title</code>.</p>
</div>
<div class="paragraph">
<p>You can set a different <code>Comparator</code> that should be used directly on a <code>Menu</code> instance.
This means you can use different comparators for sub-trees of a menu tree.
Usually a single comparator is responsible for the entire sub-tree, but you can make exceptions there as well.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="selecting-menu-items"><a class="anchor" href="#selecting-menu-items"></a>Selecting menu items</h2>
<div class="sectionbody">
<div class="paragraph">
<p>A <code>Menu</code> item in the tree can be <code>selected</code>.
When a <code>Menu</code> is selected and it has a parent, its parent <code>Menu</code> will also be selected, all the way up to the root of the tree.</p>
</div>
<div class="paragraph">
<p>As a result, as soon as there is a single item selected, you can retrieve a <em>selected path</em> containing all the <code>Menu</code> items that are selected top-down.
This is a useful feature if you want to create a breadcrumb for example.</p>
</div>
<div class="paragraph">
<p>Useful methods for <code>Menu</code>:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>isSelected()</code> to check if the <code>Menu</code> itself is selected</p>
</li>
<li>
<p><code>getSelectedItem()</code> to get its first selected child</p>
</li>
<li>
<p><code>getLowestSelectedItem()</code> to get the leaf item oo the selected path</p>
</li>
<li>
<p><code>getSelectedItemPath()</code> to retrieve the full selected path starting from this <code>Menu</code>.</p>
</li>
</ul>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
The current <code>Menu</code> implementation only allows a single selected path in a menu tree.
You cannot have more than one leaf item selected.
</td>
</tr>
</table>
</div>
<h3 id="_using_a_menuselector" class="discrete">Using a MenuSelector</h3>
<div class="paragraph">
<p><code>MenuSelector</code> is a strategy interface for finding or selecting a <code>Menu</code> in a tree.
There are several implementations available as factory methods on the <code>MenuSelector</code> class.
The default implementations will traverse the entire <code>Menu</code> tree to find the lowest item that matches the predicate.</p>
</div>
<div class="listingblock">
<div class="title">Example selecting a menu with a specific path</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">myMenu.select( MenuSelector.byPath( "path-to-select" ) );</code></pre>
</div>
</div>
<h3 id="request-menu-selector" class="discrete">HTTP request selector</h3>
<div class="paragraph">
<p>A common case for using <code>Menu</code> in a web scenario is selecting the menu item based on the path of the current web request.
The <code>RequestMenuSelector</code> is a specific <code>MenuSelector</code> implementation that does exactly that.</p>
</div>
<div class="listingblock">
<div class="title">Selecting the menu item based on the current http request</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">HttpServletRequest currentRequest;
myMenu.select( MenuSelector.byHttpServletRequest( currentRequest ) );</code></pre>
</div>
</div>
<div class="paragraph">
<p>The <code>RequestMenuSelector</code> uses a scoring mechanism to find the best matching item for the current request.
It will look at the current url, servlet path and query string, and will select the menu item that has the best match.
It will inspect the <code>url</code> property of a <code>Menu</code> but also take the value of <code>RequestMenuSelector.ATTRIBUTE_MATCHERS</code> into account.
The latter is an optional attribute that can be registered on a <code>Menu</code>, with its value expected to be a <code>Collection</code> of strings that represent urls or paths this item represents.</p>
</div>
<div class="paragraph">
<p>Suppose the current url is <code>http://my.domain/my-page?id=10</code>, then <code>RequestMenuSelector</code> would select the items the following order:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p><code>http://my.domain/my-page/create?id=10</code></p>
</li>
<li>
<p><code>/my-page/create?id=10</code></p>
</li>
<li>
<p><code>/my-page/create</code></p>
</li>
<li>
<p><code>/my-page</code></p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Note that even if an item matches only a prefix of the requested path, it will match if there is none more specific.</p>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
The <code>RequestMenuSelector</code> is the default selector that is automatically used when using the <code>MenuFactory</code> to <a href="#publishing-a-menu">publish a menu for configuration</a>.
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="building-a-menu"><a class="anchor" href="#building-a-menu"></a>Path based menu building</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Instead of manually assembling a <code>Menu</code>, it is usually easier to use a <code>PathBasedMenuBuilder</code> for configuration of an entire menu tree using a single class.
The fastest way to create a new <code>PathBasedMenuBuilder</code> builder is with <code>Menu.builder()</code>.</p>
</div>
<div class="paragraph">
<p>The builder allows you to register items as a flat list, with each item being identified by a unique path.
The path can have several segments which are separate with a <code>/</code> (forward slash) character.
Every item with a path that is also the prefix of another item&#8217;s path, will become the parent item of those other items.
The flat list of items will only be turned into a <code>Menu</code> tree when calling the <code>build()</code> method.</p>
</div>
<div class="paragraph">
<p>A <code>PathBasedMenuBuilder</code> not only allows you to create a new <code>Menu</code> instance using <code>build()</code>, it can also be used to update/extend already existing menu trees using the <code>merge(Menu)</code> method.</p>
</div>
<h3 id="_a_simple_example" class="discrete">A simple example</h3>
<div class="paragraph">
<p>Suppose you register the following menu items in order:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p><code>/my-group/item-1</code></p>
</li>
<li>
<p><code>/my-group</code></p>
</li>
<li>
<p><code>/my-item</code></p>
</li>
<li>
<p><code>/my-group/item-2</code></p>
</li>
<li>
<p><code>/my-other-group/single-item</code></p>
</li>
</ol>
</div>
<div class="paragraph">
<p>In Java code this would look like:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">Menu menu = Menu.builder()
                .item( "/my-group/item-1" ).and()
                .item( "/my-group" ).and()
                .item( "/my-item" ).and()
                .item( "/my-group/item-2" ).and()
                .item( "/my-other-group/single-item" ).and()
                .item( "/my-group:item-3" ).and()
                .build()</code></pre>
</div>
</div>
<div class="paragraph">
<p>The resulting <code>Menu</code> then contains the following hierarchy:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-text hljs" data-lang="text"> ROOT <i class="conum" data-value="1"></i><b>(1)</b>
   + /my-group <i class="conum" data-value="2"></i><b>(2)</b>
   |   + /my-group/item-1
   |   + /my-group/item-2
   + /my-group:item-3 <i class="conum" data-value="3"></i><b>(3)</b>
   + /my-item
   + /my-other-group/single-item <i class="conum" data-value="4"></i><b>(4)</b></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>By default the top-most item of the menu has no specific path.
Setting a path on the root item can be done by calling its item builder using <code>builder.root(String)</code>, but this will have no impact on the hierarchy being created.
The root path of a <code>Menu</code> is only relevant in specialized cases where you want to merge the result of a builder into an already existing <code>Menu</code>.</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>The presence of the item with path <code>/my-group</code> causes the other 2 items starting with the same path prefix to be added as child items of this one.</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>Because <code>/my-group:item-3</code> does not have the right path separator (it has a <code>:</code> instead of a <code>/</code>), it is still a separate item instead of a child of <code>/my-group</code>.</td>
</tr>
<tr>
<td><i class="conum" data-value="4"></i><b>4</b></td>
<td>A parent item does not automatically get created based on path separation.
There is no item <code>/my-other-group</code>, so this item remains a direct child of the root.</td>
</tr>
</table>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Items should peferably not be registered with a trailing slash to ensure correct conversion to a menu tree.
</td>
</tr>
</table>
</div>
<h3 id="_fluent_api_examples" class="discrete">Fluent API examples</h3>
<div class="paragraph">
<p>The <code>PathBasedMenuBuilder</code> provides a fluent API to add items, modify them and remove them, and <em>move them around</em>  by manipulating their paths.
It allows you to change the registered paths of an item before <code>Menu</code> building, thus influencing the actual menu tree that gets created.</p>
</div>
<div class="paragraph">
<p><strong>Creating an item</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">builder.item( "/item-path" )</code></pre>
</div>
</div>
<div class="paragraph">
<p>This will create an item with that path if it does not yet exist.
Once the item has been registered, the same item builder will always be returned on subsequent calls.</p>
</div>
<div class="paragraph">
<p><strong>Setting item properties</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">builder.item( "/item-path" ).title( "My item").attribute( "key", "value" )</code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>Changing an item only if it is present</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">builder.optionalItem( "/item-path" ).url( "update url" )</code></pre>
</div>
</div>
<div class="paragraph">
<p>This will return a valid item builder that allows all actions to be performed, but will in fact do nothing unless that item was registered previously.
Useful if you are not sure the item has been added, for example in  <a href="#publishing-a-menu">menu publishing</a> scenarios.</p>
</div>
<div class="paragraph">
<p><strong>Removing an item and all items that would become children</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">builder.item( "/item-path" ).remove( true )
builder.removeItems( "/item-path", true );</code></pre>
</div>
</div>
<div class="paragraph">
<p>The <code>true</code> argument indicates that all other items having the specified path as prefix should also be removed.</p>
</div>
<div class="paragraph">
<p><strong>Removing an item but not its possible children</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">builder.item( "/item-path" ).remove( false )
builder.removeItems( "/item-path", false );</code></pre>
</div>
</div>
<div class="paragraph">
<p>The <code>false</code> argument indicates that only the item with that exact path should be removed.</p>
</div>
<div class="paragraph">
<p><strong>Removing an item that might not be present</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">builder.optionalItem( "/item-path" ).remove( true|false ) <i class="conum" data-value="1"></i><b>(1)</b>
builder.removeItems( "/item-path", true|false ) <i class="conum" data-value="2"></i><b>(2)</b></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>In this case nothing will be removed if the original <code>/item-path</code> item is not present, even if the method argument is <code>true</code>.</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>When the argument is <code>true</code>, this will always attempt to remove all items starting with that prefix.
It does not matter if the exact <code>/item-path</code> is present or not.</td>
</tr>
</table>
</div>
<div class="paragraph">
<p><strong>Changing the path of an item and all its possible children</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">builder.item( "/original" ).changePathTo( "/new" )
builder.changeItemPath( "/original", "/new" )</code></pre>
</div>
</div>
<div class="paragraph">
<p>This will replace the <code>/original</code> path prefix in all items with the <code>/new</code> value.</p>
</div>
<div class="paragraph">
<p><strong>Changing the path of an item but not its possible children</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">builder.item( "/original" ).changePathTo( "/new", false )
builder.changeItemPath( "/original", "/new", false )</code></pre>
</div>
</div>
<div class="paragraph">
<p>The <code>false</code> argument indicates that only the item with the exact path should updated.
In this case <code>/original</code> would be changed to <code>/new</code>, but <code>/original/item</code> would not be modified.</p>
</div>
<div class="paragraph">
<p><strong>Changing the path of child items to-be, but not their parent item</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">builder.changeItemPath( "/original/", "/new/" )</code></pre>
</div>
</div>
<div class="paragraph">
<p>In this case I update all items where the path starts with <code>/original/</code>.
It is the trailing slash that ensures we do not modify the <code>/original</code> item.</p>
</div>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<i class="fa icon-warning" title="Warning"></i>
</td>
<td class="content">
Actions performed on a builder are immediate, that means after you change an item path, or remove an item, you can no longer refer to it in the same way.
If you do you will simply re-create a new item with that path.
</td>
</tr>
</table>
</div>
<h4 id="_delayed_configuration" class="discrete">Delayed configuration</h4>
<div class="paragraph">
<p>Builders are used extensively when <a href="#publishing-a-menu">publishing a menu</a>, allowing different classes to configure a single menu using event listeners.
The same builder is then passed to the different event handling methods, and these modify the previous configuration performed on the builder.</p>
</div>
<div class="paragraph">
<p>Sometimes you want to modify a menu builder, but you want to be sure that all other configuration has been applied first.
You can do so by registering an additional consumer using <code>andThen()</code>.</p>
</div>
<div class="listingblock">
<div class="title">Example using delayed configuration</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">// This will NOT work <i class="conum" data-value="1"></i><b>(1)</b>
builder.item( "/one" ).title( "One" ).and()
       .item( "/one" ).changePathTo( "/two" ).and()
       .item( "/one/child" ).title( "Child of one" );

// This will work as expected <i class="conum" data-value="2"></i><b>(2)</b>
builder.item( "/one" ).title( "One" ).and()
       .andThen( builder -&gt; builder.item( "/one" ).changePathTo( "/two" ) );
builder.item( "/one/child" ).title( "Child of one" );</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>In this case the path of <code>/one</code> is changed to <code>/two</code> before item <code>/one/child</code> is registered.
The resulting menu tree will contain 2 children of the root node: <code>/two</code> and <code>/one/child</code>.</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>The path prefix <code>/one</code> is updated after the initial configuration has been applied, by calling the separate consumer.
The resulting menu tree will have a single child of the root node and two items in total: <code>/two</code> and <code>/two/child</code>.</td>
</tr>
</table>
</div>
<h3 id="_menuitembuilderprocessor" class="discrete">MenuItemBuilderProcessor</h3>
<div class="paragraph">
<p>The <code>PathBasedMenuBuilder</code> also allows you to register a <code>MenuItemBuilderProcessor</code> instance, that can be used to post-process generated <code>Menu</code> items right after they have been created.</p>
</div>
<div class="paragraph">
<p>An example where this could be useful is to transparently translate context-relative urls to absolute or domain relative urls.
Please see the javadoc and source code for more information on this.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="publishing-a-menu"><a class="anchor" href="#publishing-a-menu"></a>Publishing a menu</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Menus are often used to allow other modules to configure items to them.
An example is <a href="https://across.dev/modules/AdminWebModule">AdminWebModule</a> which builds a custom <code>Menu</code> for the navigation items on the UI.
It publishes an event that any component in any module can listen for, and use it to register its own navigational items.</p>
</div>
<div class="paragraph">
<p>Behind the scenes <a href="#request-menu-selector">request based selecting</a> is then used to automatically select &amp; highlight the active nav item.</p>
</div>
<div class="paragraph">
<p>Anyone can publish an event for building a menu, using the <code>MenuFactory</code>.</p>
</div>
<div class="listingblock">
<div class="title">Example publishing a new menu with the MenuFactory</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">@Autowired
MenuFactory menuFactory;

Menu myMenu = new Menu( "myMenu" );
menuFactory.buildMenu( myMenu );</code></pre>
</div>
</div>
<div class="paragraph">
<p>When publishing a menu with the <code>MenuFactory</code> this way, the following things happen:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>a <code>PathBasedMenuBuilder</code> for the menu is created</p>
</li>
<li>
<p>a <code>RequestMenuSelector</code> is created for <a href="#selecting-menu-items">selecting the active menu items</a></p>
</li>
<li>
<p>a <code>BuildMenuEvent</code> is published, embedding the original menu, the selector and the builder</p>
<div class="ulist">
<ul>
<li>
<p>any event listener can make modifications, register items, change paths or replace the selector</p>
</li>
</ul>
</div>
</li>
<li>
<p>after the event has been handled the menu is sorted and the active items are selected (using the configured selector)</p>
</li>
<li>
<p>if there are any post-processors registered on the <code>BuildMenuEvent</code>, these will be executed before returning to the original caller</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Simple event listening can be used to customize a published menu.</p>
</div>
<div class="listingblock">
<div class="title">Example customizing myMenu</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">@EventListener( condition = "#menu.menuName == 'myMenu'" )
void registerMenuItem( BuildMenuEvent menu ) {
    menu.item( "/my-item" ).title( "my custom item" );
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>A <code>BuildMenuEvent</code> has both a generic type (the specific class of the <code>Menu</code> instance) and a <code>menuName</code> (name of menu instance), that can be used to match the specific event.</p>
</div>
<div class="listingblock">
<div class="title">Example publishing and customizing a typed menu</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">class MyCustomMenu extends Menu {
}

MyCustomMenu myMenu = new MyCustomMenu();
menuFactory.buildMenu( myMenu );

@EventListener
void registerMenuItem( BuildMenuEvent&lt;MyCustomMenu&gt; menu ) {
    menu.item( "/my-item" ).title( "my custom item" );
}</code></pre>
</div>
</div>
<div class="paragraph">
<p><code>MenuFactory</code> has several other variations for building events.
Please refer to the javadoc for an overview.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
More advanced configurations often have custom types for both <code>Menu</code> and <code>BuildMenuEvent</code>, exposing more context information.
This requires you to customize the <code>MenuFactory</code> configuration.
We invite you to look at both the javadoc and source code if you want to implement a similar scenario.
</td>
</tr>
</table>
</div>
<h3 id="_post_processing_a_menu" class="discrete">Post-processing a menu</h3>
<div class="paragraph">
<p>If you need to post-process a generated <code>Menu</code> after all items have been registered, the menu has been built, sorted and active items selected; you can register a <code>Consumer&lt;Menu&gt;</code> using <code>event.addMenuPostProcessor()</code>.</p>
</div>
<h3 id="_automatic_menu_publishing_from_handler_methods" class="discrete">Automatic menu publishing from handler methods</h3>
<div class="paragraph">
<p><code>MenuFactory</code> provides integration with handler methods through means of an argument resolver.
If you specify a menu argument, the instance will be created and published automatically, provided there is a parameter-less constructor available if you use a specific menu type.</p>
</div>
<div class="listingblock">
<div class="title">Example handler method with a menu</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">@GetMapping( "/" )
String renderHomepage( MyCustomMenu navMenu ) {
    ...
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>When the handler method is being called, the <code>MenuFactory</code> will be checked for the presence of a menu named <code>navMenu</code>.
If there is none available, a new <code>MyCustomMenu</code> will be created with name <code>navMenu</code>, and the menu will be published.</p>
</div>
<div class="paragraph">
<p>When a menu is generated this way, it is also available as a request attribute with the menu name.
In our example, a request attribute called <code>navMenu</code> would be available in the <code>View</code>.</p>
</div>
<div class="paragraph">
<p>A single handler method can have as many menu references as it wants, as long as the names are different.
Every menu will only be built once per request.
In the above example, subsequent calls to <code>menuFactory.buildMenu( "navMenu" )</code> would always return the same instance.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_rendering_a_menu"><a class="anchor" href="#_rendering_a_menu"></a>Rendering a menu</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Across Web itself does not in any way determine how a <code>Menu</code> is visualized, this is up to the application.</p>
</div>
<div class="listingblock">
<div class="title">Example Thymeleaf snippet rendering a Bootstrap markup breadcrumb</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-html hljs" data-lang="html">&lt;ol class="breadcrumb"&gt;
&lt;li th:each="item : ${menu.selectedItemPath}"
        th:unless="${item.disabled}"
        th:classappend="${itemStat.last} ? 'active'"
        th:if="${item.hasTitle()}"&gt;

	&lt;span th:if="${itemStat.last}" th:text="${item.title}"&gt;
	    title selected item
	&lt;/span&gt;

	&lt;div th:unless="${itemStat.last}" th:remove="tag"&gt;
		&lt;span th:if="${!item.hasUrl() and (!item.isGroup() or !item.firstItem.hasUrl())}"
		      th:text="${item.title}"&gt;title if no url&lt;/span&gt;
		&lt;a th:if="${item.hasUrl() and !itemStat.last}"
		   th:href="@{${item.url}}"
		   th:text="${item.title}"&gt;title with url&lt;/a&gt;
		&lt;a th:if="${!item.hasUrl() and item.isGroup() and item.firstItem.hasUrl()}"
		   th:href="@{${item.firstItem.url}}"
		   th:text="${item.title}"&gt;title with first item url&lt;/a&gt;
	&lt;/div&gt;
&lt;/li&gt;
&lt;/ol&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>A module like <a href="https://across.dev/modules/BootstrapUiModule">BootstrapUiModule</a> provides components for rendering <code>Menu</code> instances.</p>
</div>
</div>
</div>
    <div class="article-footer-nav">
        <a class="article-footer-nav-previous" href="layout-templates.html">&laquo; Layout templates</a>
            <span class="article-footer-nav-current">Working with menus</span>
        <a class="article-footer-nav-next" href="view-elements.html">ViewElement infrastructure &raquo;</a>
    </div>
</article>
<aside class="article-aside hidden" role="navigation">
  <h3 class="toc-title">Contents</h3>
  <div id="article-toc"></div>
</aside>
  </main>
</div>
<footer class="footer">
  <p>The Across documentation site is generated using <a href="https://antora.org" target="_blank">Antora</a>.</p>
  <div class="footer-totop">
    <!--srcset="/acrossWebsite/img/foreach-logo@2x.png 2x"-->
    <a class="footer-partner" href="http://foreach.be/" target="_blank">
      sponsored by <svg width="20" height="20" viewBox="0 0 277 311" xmlns="http://www.w3.org/2000/svg">
        <g fill="none" fill-rule="evenodd">
          <path d="M27 307.3V133.5H.9V92.7H27v-8.8c0-24.1 4.3-46.5 19.7-64.1C58.2 6.6 74.7.1 92.9.1c13.4 0 23.7 2.2 31.2 4.8l-5.9 44.8c-3.9-1.8-9.5-2.6-15.8-2.6-17.4 0-23.7 16.7-23.7 35.5v10.1h33.6v40.8H78.7v173.8H27z" fill="#FFCE01" fill-rule="nonzero"></path>
          <path d="M229.2 181c0-27.6-6.3-49.1-21.7-49.1-17 0-23.7 27.7-24.1 49.1h45.8zM183 221.4c.8 33.4 18.2 45.6 41.1 45.6 14.6 0 27.6-3.5 36.7-7l7.1 41.2c-13.4 5.7-33.6 9.7-53.3 9.7-52.5 0-81.4-38.6-81.4-105.8 0-72 33.6-115 77.4-115 41.5 0 65.6 36.4 65.6 101.4 0 15.4-.4 23.7-1.6 29.8H183v.1z" fill="#FFF" fill-rule="nonzero"></path>
        </g>
      </svg>
    </a>
    <a href="#section-top">
      <svg width="34" height="34" viewBox="0 0 62 62" xmlns="http://www.w3.org/2000/svg">
        <title>icon</title>
        <g transform="rotate(-90 30.5 30.5)" fill="none" fill-rule="evenodd">
          <circle stroke="#ffffff" fill="#1D2A3A" transform="rotate(180 30.007 30.942)" cx="30.007" cy="30.942" r="30"></circle>
          <path fill="#ffffff" d="M25 38.884h3.713l6.3-7.797-6.3-8.087-3.713.064 6.155 7.972"></path>
        </g>
      </svg>
    </a>
  </div>
</footer>
<script src="https://cdnjs.cloudflare.com/ajax/libs/tocbot/4.1.1/tocbot.min.js"></script>
<script src="../../../../_/js/site.js"></script>
<script src="../../../../_/js/vendor/highlight.js"></script>
<script>hljs.initHighlighting()</script>
<script>
  tocbot.init( {
                 tocSelector: '#article-toc',
                 contentSelector: 'article',
                 headingSelector: 'h2, h3, h4',
                 collapseDepth: 3,
                 positionFixedSelector: '#article-toc',
                 scrollSmooth: false
               } );
  var tocList = document.getElementById( 'article-toc' ).getElementsByClassName( 'toc-list' );
  if ( tocList && tocList.length > 0 && tocList[0].childNodes.length > 0 ) {
    document.getElementById( 'article-toc' ).parentNode.classList.remove( 'hidden' );
  }
</script>
  </body>
</html>
