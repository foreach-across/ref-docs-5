<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Extending EQL - Across</title>
    <meta name="generator" content="Antora 2.1.1">
    <link rel="stylesheet" href="../../_/css/site.css">
<link href="https://fonts.googleapis.com/css?family=Open+Sans:300,400,600,700,800" rel="stylesheet">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/docsearch.js@2/dist/cdn/docsearch.min.css" />
<script type="text/javascript" src="https://cdn.jsdelivr.net/npm/docsearch.js@2/dist/cdn/docsearch.min.js"></script>
<meta name="og:title" content="Across Documentation"/>
<meta name="og:image" content="https://across.foreach.be/across/resources/static/acrossWebsite/img/og-image-across.jpg"/>
<link rel="icon" type="image/png" sizes="16x16" href="https://across.foreach.be/across/resources/static/acrossWebsite/img/favicon/favicon-16x16.png"/>
<link rel="icon" type="image/png" sizes="32x32" href="https://across.foreach.be/across/resources/static/acrossWebsite/img/favicon/favicon-32x32.png"/>
<link rel="icon" type="image/png" sizes="96x96" href="https://across.foreach.be/across/resources/static/acrossWebsite/img/favicon/favicon-96x96.png"/>
<link rel="apple-touch-icon" type="image/png" href="https://across.foreach.be/across/resources/static/acrossWebsite/img/favicon/apple-icon-120x120.png"/>
<link rel="apple-touch-icon" type="image/png" sizes="152x152" href="https://across.foreach.be/across/resources/static/acrossWebsite/img/favicon/apple-icon-152x152.png"/>
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="https://across.foreach.be/across/resources/static/acrossWebsite/img/favicon/apple-icon-180x180.png"/>
  </head>
  <body class="article">
<header class="header" role="banner">
  <div class="m-mobile-menu__button js-overlay-menu-button" data-target="mobile-menu">
    <span class="m-mobile-menu__line"></span>
    <span class="m-mobile-menu__line"></span>
    <span class="m-mobile-menu__line"></span>
  </div>

  <div class="m-mobile-menu">
    <div class="m-mobile-menu__logo">
      <a class="m-nav__logo" href="/">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 82.9 95.7">
          <title>logo-across</title>
          <path fill="#3CA873" d="M0 23.9l15.9-9.2 41.5 23.9-16 9.2"></path>
          <path fill="#0093D8" d="M25.5 9.2L41.4 0l41.5 23.9-16 9.2"></path>
          <path fill="#53DD99" d="M41.4 95.7l16-9.3V38.6l-16 9.2"></path>
          <path fill="#22CEFA" d="M66.9 80.9l16-9.2V23.9l-16 9.2"></path>
          <path fill="#257A50" d="M12.5 64.5L28.9 55l-16.4-9.4"></path>
          <path fill="#4DBC86" d="M12.5 64.5L28.9 74V55"></path>
        </svg>
        <span>Across</span>
      </a>
    </div>
  </div>
  <div class="m-mobile-menu__container js-mobile-menu-overlay" id="mobile-menu">
    <nav class="m-mobile-menu__list">
      <a href="https://across.foreach.be/blog">Blog</a>
      <a href="https://across.foreach.be/documentation" class="is-active">Docs</a>
      <a href="https://across.foreach.be/modules">Modules</a>
      <a href="https://across.foreach.be/faq">FAQ</a>
      <a href="http://start-across.foreach.be">Get started</a>
    </nav>
  </div>
  <nav class="m-nav is-sticky">
    <a class="m-nav__logo" href="../..">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 82.9 95.7">
        <title>logo-across</title>
        <path fill="#3CA873" d="M0 23.9l15.9-9.2 41.5 23.9-16 9.2"></path>
        <path fill="#0093D8" d="M25.5 9.2L41.4 0l41.5 23.9-16 9.2"></path>
        <path fill="#53DD99" d="M41.4 95.7l16-9.3V38.6l-16 9.2"></path>
        <path fill="#22CEFA" d="M66.9 80.9l16-9.2V23.9l-16 9.2"></path>
        <path fill="#257A50" d="M12.5 64.5L28.9 55l-16.4-9.4"></path>
        <path fill="#4DBC86" d="M12.5 64.5L28.9 74V55"></path>
      </svg>
      <span>Across</span>
    </a>

    <div class="m-nav__link-group">
      <a href="https://across.foreach.be/blog">Blog</a>
      <a href="https://across.foreach.be/documentation" class="is-active">Docs</a>
      <a href="https://across.foreach.be/modules">Modules</a>
      <a href="https://across.foreach.be/faq">FAQ</a>
      <a href="http://start-across.foreach.be">Get started</a>
    </div>
  </nav>
</header>
<div class="main-wrapper">
<div class="navigation-container" data-component="entity-module" data-version="master">
  <aside class="navigation">
    <div class="panels">
      <div id="search-box" class="search-box is-active">
        <input id="search-input" type="text" placeholder="Search the documentation">
      </div>
      <div class="navigation-menu is-active" data-panel="menu">
  <nav class="nav-menu">
    <h3 class="title"><a href="../index.html">Module: Entity Management</a></h3>
<ul class="nav-list">
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../quick-start.html">Quick start</a>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-toggle"></button>
    <a class="nav-link" href="../releases/index.html">Releases</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../releases/4.x.html">4.x</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../releases/3.x.html">3.x</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../releases/2.x.html">2.x</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../configuration-properties.html">Configuration properties</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-toggle"></button>
    <a class="nav-link" href="../entity-module-explained/index.html">EntityModule explained</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <button class="nav-toggle"></button>
    <a class="nav-link" href="../entity-module-explained/entity-configuration.html">Entity configuration</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <span class="nav-text">Entity properties and controls</span>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../entity-module-explained/entity-configuration.html#entity-model">Entity model</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../entity-module-explained/entity-views.html">Entity views</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../entity-module-explained/associations.html">Associations</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../entity-module-explained/permissions.html">Permissions: allowable actions</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <span class="nav-text">EntityQuery</span>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-toggle"></button>
    <a class="nav-link" href="../registering-entities/index.html">Configuring entities</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../customizing-entities/entity-properties.html">Configuring properties</a>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-toggle"></button>
    <a class="nav-link" href="../registering-entities/manual-registration.html">Manually adding an entity type</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../registering-entities/entity-properties.html">Registering properties</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../customizing-entities/entity-model.html">Defining an entity model</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../customizing-entities/entity-views.html">Configuring entity views</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../customizing-entities/entity-associations.html">Adding associations</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../registering-entities/creating-an-entity-registrar.html">Automatic registration of entities</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../customizing-entities/index.html">Customizing existing entities</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../customizing-entities/entity-validation.html">Customizing entity validation</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../registering-entities/enums-as-entities.html">Using enums as entities</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-toggle"></button>
    <a class="nav-link" href="../building-views/index.html">Building entity views</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <span class="nav-text">How entity views work</span>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-toggle"></button>
    <span class="nav-text">Creating views</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <span class="nav-text">List views</span>
  </li>
  <li class="nav-item" data-depth="3">
    <span class="nav-text">Form views</span>
  </li>
  <li class="nav-item" data-depth="3">
    <span class="nav-text">Generic views</span>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-toggle"></button>
    <a class="nav-link" href="../building-views/customizing-views/customizing-views.html">Customizing existing views</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../building-views/customizing-views/list-view.html">List views</a>
  </li>
  <li class="nav-item" data-depth="3">
    <button class="nav-toggle"></button>
    <a class="nav-link" href="../building-views/customizing-views/form-view.html">CRUD views</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../building-views/customizing-views/create-update-view.html">Create and update form</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../building-views/customizing-views/detail-view.html">Read/detail view</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../building-views/customizing-views/delete-view.html">Delete form</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="3">
    <span class="nav-text">Common tasks</span>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../building-views/association-views.html">Association views</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../building-views/linking-to-entity-views.html">Linking to entity views</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../building-views/localization.html">Localization &amp; text messages</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../building-views/styling.html">Styling views</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../building-views/security-and-permissions.html">Security and permissions</a>
  </li>
  <li class="nav-item" data-depth="2">
    <span class="nav-text">Admin Web menu</span>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-toggle"></button>
    <a class="nav-link" href="../property-controls/index.html">Entity property controls</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <span class="nav-text">Specifying a control type</span>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../property-controls/creating-a-property-control/generating-controls-for-properties.html">Generating controls for properties</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-toggle"></button>
    <span class="nav-text">Available controls</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../property-controls/autosuggest.html">Autosuggest</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../property-controls/checkbox.html">Checkbox</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../property-controls/datetime.html">Date/Time picker</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../property-controls/select.html">Drop-down select</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../property-controls/embedded-collection.html">Embedded collection</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../property-controls/fieldset.html">Fieldset</a>
  </li>
  <li class="nav-item" data-depth="2">
    <span class="nav-text">Form group</span>
  </li>
  <li class="nav-item" data-depth="2">
    <span class="nav-text">Label</span>
  </li>
  <li class="nav-item" data-depth="2">
    <span class="nav-text">Multi-value text</span>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../property-controls/numeric.html">Numeric</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../property-controls/radio.html">Radio button</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../property-controls/value.html">Readonly property value</a>
  </li>
  <li class="nav-item" data-depth="2">
    <span class="nav-text">Sortable table</span>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../property-controls/textbox.html">Textbox</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-toggle"></button>
    <a class="nav-link" href="../property-controls/creating-a-property-control/index.html">Creating a new property control</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <span class="nav-text">Rendering with ViewElements</span>
  </li>
  <li class="nav-item" data-depth="2">
    <span class="nav-text">Accessing entity and property data</span>
  </li>
  <li class="nav-item" data-depth="2">
    <span class="nav-text">Registering a control type</span>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../property-controls/creating-a-property-control/property-data-binding.html">Property data binding</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-toggle"></button>
    <a class="nav-link" href="index.html">EntityQuery infrastructure</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <button class="nav-toggle"></button>
    <a class="nav-link" href="eql.html">EntityQuery Language (EQL)</a>
<ul class="nav-list">
  <li class="nav-item is-current-page" data-depth="3">
    <a class="nav-link" href="extending-eql.html">Extending EQL</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="filtering-list-views.html">Filtering list views</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-toggle"></button>
    <a class="nav-link" href="../integration-with-other-modules.html">Integrations</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <span class="nav-text">Admin Web</span>
  </li>
  <li class="nav-item" data-depth="2">
    <span class="nav-text">Spring Data</span>
  </li>
  <li class="nav-item" data-depth="2">
    <span class="nav-text">Spring Security</span>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../developer-tools.html">Developer tools</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../glossary.html">Glossary</a>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-toggle"></button>
    <a class="nav-link" href="../services-and-components/index.html">Services and components</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <button class="nav-toggle"></button>
    <a class="nav-link" href="../web-resources/index.html">Web resources</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../web-resources/javascript-plugins.html">Javascript plugins</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../services-and-components/attributes-overview.html">Attributes overview</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../services-and-components/message-codes.html">Message codes</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../services-and-components/default-entityviewprocessors.html">Default EntityViewProcessors</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-toggle"></button>
    <a class="nav-link" href="../guides/index.html">Guides &amp; How-tos</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <button class="nav-toggle"></button>
    <span class="nav-text">General</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../guides/general/adding-a-custom-property-to-an-entity.html">Creating a custom property</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../guides/general/creating-custom-control-for-object-type.html">Creating a custom control</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../guides/general/registering-attributes-property-of-type.html">Registering attributes on properties</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../guides/general/creating-an-entity-id-proxy-property.html">Mapping id properties to entities</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-toggle"></button>
    <span class="nav-text">List views</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../guides/list-view/adding-a-custom-action-to-a-listview.html">Adding a row action</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-toggle"></button>
    <span class="nav-text">Form views</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../guides/form-view/creating-an-extension-form.html">Creating a custom form</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../guides/form-view/creating-a-fileupload-form.html">Creating a file upload form</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../guides/form-view/customize-link-to-delete-view.html">Customize link to delete view</a>
  </li>
</ul>
  </li>
</ul>
  </li>
</ul>
  </li>
</ul>
  </nav>
</div>
      <div class="navigation-explore" data-panel="explore">
  <div class="context">
    <span class="title">Module: Entity Management</span>
    <span class="version">master</span>
  </div>
  <ul class="components">
    <li class="component">
      <span class="title">Across Platform</span>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../across/index.html">master</a>
        </li>
        <li class="version">
          <a href="../../across/2.1.5/index.html">2.1.5</a>
        </li>
        <li class="version">
          <a href="../../across/2.1.4/index.html">2.1.4</a>
        </li>
        <li class="version">
          <a href="../../across/2.1.3/index.html">2.1.3</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <span class="title">Application Guides</span>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../guides/5.1.0-SNAPSHOT/index.html">5.1.0-SNAPSHOT</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <span class="title">Auto-configuration Support</span>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../across-autoconfigure/index.html">master</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <span class="title">Migration guides</span>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../migration/index.html">master</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <span class="title">Module: Admin Web</span>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../admin-web-module/index.html">master</a>
        </li>
        <li class="version">
          <a href="../../admin-web-module/3.2.0/index.html">3.2.0</a>
        </li>
        <li class="version">
          <a href="../../admin-web-module/3.1.1/index.html">3.1.1</a>
        </li>
        <li class="version">
          <a href="../../admin-web-module/3.1.0/index.html">3.1.0</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <span class="title">Module: Application Info</span>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../application-info-module/index.html">master</a>
        </li>
        <li class="version">
          <a href="../../application-info-module/1.0.1/index.html">1.0.1</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <span class="title">Module: Batch Processing</span>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../spring-batch-module/index.html">master</a>
        </li>
        <li class="version">
          <a href="../../spring-batch-module/1.0.2/index.html">1.0.2</a>
        </li>
        <li class="version">
          <a href="../../spring-batch-module/1.0.1/index.html">1.0.1</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <span class="title">Module: Bootstrap UI</span>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../bootstrap-ui-module/index.html">master</a>
        </li>
        <li class="version">
          <a href="../../bootstrap-ui-module/2.2.2/index.html">2.2.2</a>
        </li>
        <li class="version">
          <a href="../../bootstrap-ui-module/2.2.1/index.html">2.2.1</a>
        </li>
        <li class="version">
          <a href="../../bootstrap-ui-module/2.1.1/index.html">2.1.1</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <span class="title">Module: Caching - Ehcache</span>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../ehcache-module/index.html">master</a>
        </li>
        <li class="version">
          <a href="../../ehcache-module/1.0.1/index.html">1.0.1</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <span class="title">Module: Debug Web</span>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../debug-web-module/index.html">master</a>
        </li>
        <li class="version">
          <a href="../../debug-web-module/2.0.0/index.html">2.0.0</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <span class="title">Module: Documents & Forms</span>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../dynamic-forms-module/index.html">master</a>
        </li>
        <li class="version">
          <a href="../../dynamic-forms-module/0.0.3/index.html">0.0.3</a>
        </li>
        <li class="version">
          <a href="../../dynamic-forms-module/0.0.2/index.html">0.0.2</a>
        </li>
      </ul>
    </li>
    <li class="component is-current">
      <span class="title">Module: Entity Management</span>
      <ul class="versions">
        <li class="version is-current is-latest">
          <a href="../index.html">master</a>
        </li>
        <li class="version">
          <a href="../3.4.0/index.html">3.4.0</a>
        </li>
        <li class="version">
          <a href="../3.3.0/index.html">3.3.0</a>
        </li>
        <li class="version">
          <a href="../3.2.0/index.html">3.2.0</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <span class="title">Module: File Management</span>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../file-manager-module/index.html">master</a>
        </li>
        <li class="version">
          <a href="../../file-manager-module/2.1.0-SNAPSHOT/index.html">2.1.0-SNAPSHOT</a>
        </li>
        <li class="version">
          <a href="../../file-manager-module/1.4.0/index.html">1.4.0</a>
        </li>
        <li class="version">
          <a href="../../file-manager-module/1.3.0/index.html">1.3.0</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <span class="title">Module: Hibernate JPA</span>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../hibernate-jpa-module/index.html">master</a>
        </li>
        <li class="version">
          <a href="../../hibernate-jpa-module/3.0.0/index.html">3.0.0</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <span class="title">Module: LDAP Support</span>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../ldap-module/index.html">master</a>
        </li>
        <li class="version">
          <a href="../../ldap-module/1.0.1/index.html">1.0.1</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <span class="title">Module: Logging</span>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../logging-module/index.html">master</a>
        </li>
        <li class="version">
          <a href="../../logging-module/1.1.0/index.html">1.1.0</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <span class="title">Module: Mobile Support</span>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../spring-mobile-module/index.html">master</a>
        </li>
        <li class="version">
          <a href="../../spring-mobile-module/2.0.0/index.html">2.0.0</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <span class="title">Module: Properties</span>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../properties-module/index.html">master</a>
        </li>
        <li class="version">
          <a href="../../properties-module/1.1.1/index.html">1.1.1</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <span class="title">Module: Security</span>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../spring-security-module/index.html">master</a>
        </li>
        <li class="version">
          <a href="../../spring-security-module/4.1.0-SNAPSHOT/index.html">4.1.0-SNAPSHOT</a>
        </li>
        <li class="version">
          <a href="../../spring-security-module/3.0.2/index.html">3.0.2</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <span class="title">Module: Security - ACLs</span>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../spring-security-acl-module/4.1.0-SNAPSHOT/index.html">4.1.0-SNAPSHOT</a>
        </li>
        <li class="version">
          <a href="../../spring-security-acl-module/3.0.2/index.html">3.0.2</a>
        </li>
        <li class="version">
          <a href="../../spring-security-acl-module/3.0.1/index.html">3.0.1</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <span class="title">Module: Security - OAuth2</span>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../oauth2-module/index.html">master</a>
        </li>
        <li class="version">
          <a href="../../oauth2-module/2.1.1/index.html">2.1.1</a>
        </li>
        <li class="version">
          <a href="../../oauth2-module/2.1.0/index.html">2.1.0</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <span class="title">Module: User Management</span>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../user-module/index.html">master</a>
        </li>
        <li class="version">
          <a href="../../user-module/4.1.0-SNAPSHOT/index.html">4.1.0-SNAPSHOT</a>
        </li>
        <li class="version">
          <a href="../../user-module/3.1.1/index.html">3.1.1</a>
        </li>
        <li class="version">
          <a href="../../user-module/3.1.0/index.html">3.1.0</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <span class="title">Module: Web CMS</span>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../web-cms-module/index.html">master</a>
        </li>
        <li class="version">
          <a href="../../web-cms-module/0.0.7/index.html">0.0.7</a>
        </li>
        <li class="version">
          <a href="../../web-cms-module/0.0.6/index.html">0.0.6</a>
        </li>
      </ul>
    </li>
  </ul>
</div>
    </div>
    <script>
      var indexName = window.location.href.indexOf('across-site/production/')>0 ? 'antora-across-site-production' : 'antora-across-site-preview';
      docsearch({
                  appId: 'YNK2RERBV5',
                  apiKey: '201d66bbf44a6c62002472e491d74568',
                  indexName: indexName,
                  inputSelector: '#search-input',
                  algoliaOptions: { hitsPerPage: 10 }
                })
    </script>
  </aside>
</div>
  <main class="main">
<div class="toolbar" role="navigation">
  <button class="navigation-toggle"></button>
  <a href="../../across/index.html" class="home-link"></a>
<nav class="crumbs" aria-label="breadcrumbs">
  <ul>
    <li class="crumb"><a href="../index.html">Module: Entity Management</a></li>
    <li class="crumb"><a href="index.html">EntityQuery infrastructure</a></li>
    <li class="crumb"><a href="eql.html">EntityQuery Language (EQL)</a></li>
    <li class="crumb"><a href="extending-eql.html">Extending EQL</a></li>
  </ul>
</nav>
<div class="page-versions">
  <button class="versions-menu-toggle" title="Show other versions of page">master</button>
  <div class="versions-menu">
    <a class="version is-current" href="extending-eql.html">master</a>
    <a class="version" href="../3.4.0/entity-query/extending-eql.html">3.4.0</a>
    <a class="version" href="../3.3.0/entity-query/extending-eql.html">3.3.0</a>
    <a class="version" href="../3.2.0/entity-query/extending-eql.html">3.2.0</a>
  </div>
</div>
  <div class="edit-this-page"><a href="https://github.com/ForeachOS/ax-docs-entity-module/edit/master/docs/modules/ROOT/pages/entity-query/extending-eql.adoc">Edit this Page</a></div>
</div>
<article class="doc"><a name="section-top"></a>
      <h1>Extending EQL</h1>
    <div class="sect1">
<h2 id="_custom_value_conversion"><a class="anchor" href="#_custom_value_conversion"></a>Custom value conversion</h2>
<div class="sectionbody">
<div class="paragraph">
<p>When converting an EQL query all value arguments are first converted to an <code>EQType</code> representation before being converted into their respective Java type.
Actual type conversion is then done via the Spring <code>ConversionService</code>.
To create a custom conversion you can simply register a <code>Converter</code> that converts from the relevant <code>EQType</code> to the property type.</p>
</div>
<div class="paragraph">
<p>The following table shows how EQL arguments will be converted to their respective <code>EQType</code>:</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 66.6667%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Argument value</th>
<th class="tableblock halign-left valign-top">EQType</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">name</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>EQValue</code>: name</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">'name'</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>EQString</code>: name</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">(name, 'name')</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>EQGroup</code></p>
<p class="tableblock"> - <code>EQValue</code>: name</p>
<p class="tableblock"> - <code>EQString</code>: name</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">users(name, 'name')</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>EQFunction</code>: users</p>
<p class="tableblock"> [arguments]</p>
<p class="tableblock">   - <code>EQValue</code>: name</p>
<p class="tableblock">   - <code>EQString</code>: name</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>By default EntityModule registers id-based lookups for all its registered entities.
So supposing you have an entity <code>User</code> with id 1 and you want to query on a property <strong>creator</strong> of type <code>User</code>, the following query would work: <code>creator = 1</code>.</p>
</div>
<div class="paragraph">
<p>When building the <code>EntityQuery</code> the value 1 would be used as the id to find the <code>User</code> instance, and the latter would be used as the argument for the final query.
If we want to replace the custom behavior and allow the user to be specified by username instead, we could easily register a custom converter.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">public class EQValueToUserConverter implements Converter&lt;EQValue, User&gt;
{
    ...

    @Override
    public User convert( EQValue source ) {
        return userRepository.findByUsername( source.getValue() );
    }
}

...

converterRegistry.addConverter( new EQValueToUserConverter(...) );</code></pre>
</div>
</div>
<div class="paragraph">
<p>This would allow us to execute the queries like <code>creator = john</code> or  <code>creator in (john, jane)</code>.
Any type-specific converter will take precedence over the defaults.</p>
</div>
<div class="quoteblock">
<blockquote>
<div class="paragraph">
<p><strong>NOTE</strong>
The example above would only work if the username can never contain any whitespace.
If it can, then we would have to specify it as a String instead and write a converter for <code>EQString</code> instead of <code>EQValue</code>.</p>
</div>
</blockquote>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_adding_custom_functions"><a class="anchor" href="#_adding_custom_functions"></a>Adding custom functions</h2>
<div class="sectionbody">
<div class="paragraph">
<p>An EQL function is represented by a unique name and can optionally take a number of arguments for its execution.
Adding custom functions is as easy as simply defining a <code>@Component</code> that implements the <code>EntityQueryFunctionHandler</code> interface.
All components of this type will be detected and checked when executing an EQL query.</p>
</div>
<div class="paragraph">
<p>The handler will be called with the required contextual data for the return type requested.
If you want to use a function to compare a property that has a <code>Date</code> type, your function should return a <code>Date</code> instance as well.</p>
</div>
<div class="paragraph">
<p>A single handler can support multiple functions and requested return types.</p>
</div>
<div class="paragraph">
<p><strong>Simple EntityQuery function that always returns the String hello</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">/**
 * Simple EntityQuery function that always returns the String 'hello'.
 * Example eql: name = hello() or name in (hello(), 'goodbye')
 */
@Component
public class HelloFunction implements EntityQueryFunctionHandler
{
	@Override
	public boolean accepts( String functionName, TypeDescriptor desiredType ) {
		return "hello".equals( functionName );
	}

	@Override
	public Object apply( String functionName,
	                     EQType[] arguments,
	                     TypeDescriptor desiredType,
	                     EQTypeConverter argumentConverter ) {
		return "hello";
	}
}</code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_custom_eql_translation_with_registered_fields"><a class="anchor" href="#_custom_eql_translation_with_registered_fields"></a>Custom EQL translation with registered fields</h2>
<div class="sectionbody">
<div class="paragraph">
<p>You can register an <code>EntityQueryConditionTranslator</code> attribute on any entity property.
If a translator instance is present, it will be called during the parsing phase of an EQL statement into an <code>EntityQuery</code>.</p>
</div>
<div class="paragraph">
<p><strong>Ensuring a field search is always case insensitive</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">configuration
 .withType( Group.class )
 .properties(
    props -&gt; props.property( "name" ).attribute( EntityQueryConditionTranslator.class, EntityQueryConditionTranslator.ignoreCase() )
 )</code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>Define a search text property that actually searches on other fields</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">configuration.withType( Note.class )
             .properties( props -&gt; props.property( "text" )
                                        .propertyType( String.class )
                                        .attribute( EntityQueryConditionTranslator.class,
                                                    EntityQueryConditionTranslator.expandingOr( "name", "content" ) )
                                        .hidden( true )
             )</code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>An <code>EntityQueryConditionTranslator</code> or custom properties to use for filtering should be specified on the <code>EntityConfiguration</code> and not through an <code>EntityQueryFilterConfiguration</code>.
The property customizations of the <code>EntityQueryFilterConfiguration</code> is only used for building the entity query filter form.</p>
</div>
<div class="paragraph">
<p>The actual parsing of the query and execution of the query uses the property registry of the <code>EntityConfiguration</code>, which is configured via the <code>EntityQueryFacadeRegistrar</code>.</p>
</div>
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="custom-eql-translated"><a class="anchor" href="#custom-eql-translated"></a>Custom EQL translation with non registered fields</h2>
<div class="sectionbody">
<div class="paragraph">
<p>In the example above we expanded (replaced and added) the <code>text</code> field into <code>name</code> and <code>content</code>.
These three fields are all present on the entity <code>Group</code>.
In some cases, it might be useful to expand a field into fields that are <strong>not present</strong> on the entity.</p>
</div>
<div class="paragraph">
<p>A use case would be if you are querying a backend and want to expand a <code>text</code> field into <code>text</code> and <code>sub_text</code>, where <code>sub_text</code> is not present on the entity itself.</p>
</div>
<div class="paragraph">
<p>You can achieve this by setting an <code>EntityQuery</code> or <code>EntityQueryCondition</code> as <code>translated</code>.
When the translated flag is set, the <code>DefaultEntityQueryTranslator</code> will not attempt to lookup fields from the <code>PropertyRegistry</code>
anymore.
It will then send the <code>EntityQuery</code> as-is to the backend.</p>
</div>
<div class="paragraph">
<p><strong>Define a search text property that actually searches on another field, where <code>sub_text</code> is not a registered property</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">configuration.withType( Article.class )
     .properties( props -&gt; props.property( "text" )
        .attribute( EntityQueryConditionTranslator.class, new EntityQueryConditionTranslator() {
                @Override
                public EntityQueryExpression translate( EntityQueryCondition condition ) {
                    return new EntityQueryCondition( "sub_text", condition.getOperand(), condition.getFirstArgument() ).setTranslated( true );
                }
            }
        ) );</code></pre>
</div>
</div>
</div>
</div>
    <div class="article-footer-nav">
        <a class="article-footer-nav-previous" href="eql.html">&laquo; EntityQuery Language (EQL)</a>
            <span class="article-footer-nav-current">Extending EQL</span>
        <a class="article-footer-nav-next" href="filtering-list-views.html">Filtering list views &raquo;</a>
    </div>
</article>
<aside class="article-aside hidden" role="navigation">
  <h3 class="toc-title">Contents</h3>
  <div id="article-toc"></div>
</aside>
  </main>
</div>
<footer class="footer">
  <p>The Across documentation site is generated using <a href="https://antora.org" target="_blank">Antora</a>.</p>
  <div class="footer-totop">
    <!--srcset="/acrossWebsite/img/foreach-logo@2x.png 2x"-->
    <a class="footer-partner" href="http://foreach.be/" target="_blank">
      sponsored by <svg width="20" height="20" viewBox="0 0 277 311" xmlns="http://www.w3.org/2000/svg">
        <g fill="none" fill-rule="evenodd">
          <path d="M27 307.3V133.5H.9V92.7H27v-8.8c0-24.1 4.3-46.5 19.7-64.1C58.2 6.6 74.7.1 92.9.1c13.4 0 23.7 2.2 31.2 4.8l-5.9 44.8c-3.9-1.8-9.5-2.6-15.8-2.6-17.4 0-23.7 16.7-23.7 35.5v10.1h33.6v40.8H78.7v173.8H27z" fill="#FFCE01" fill-rule="nonzero"></path>
          <path d="M229.2 181c0-27.6-6.3-49.1-21.7-49.1-17 0-23.7 27.7-24.1 49.1h45.8zM183 221.4c.8 33.4 18.2 45.6 41.1 45.6 14.6 0 27.6-3.5 36.7-7l7.1 41.2c-13.4 5.7-33.6 9.7-53.3 9.7-52.5 0-81.4-38.6-81.4-105.8 0-72 33.6-115 77.4-115 41.5 0 65.6 36.4 65.6 101.4 0 15.4-.4 23.7-1.6 29.8H183v.1z" fill="#FFF" fill-rule="nonzero"></path>
        </g>
      </svg>
    </a>
    <a href="#section-top">
      <svg width="34" height="34" viewBox="0 0 62 62" xmlns="http://www.w3.org/2000/svg">
        <title>icon</title>
        <g transform="rotate(-90 30.5 30.5)" fill="none" fill-rule="evenodd">
          <circle stroke="#ffffff" fill="#1D2A3A" transform="rotate(180 30.007 30.942)" cx="30.007" cy="30.942" r="30"></circle>
          <path fill="#ffffff" d="M25 38.884h3.713l6.3-7.797-6.3-8.087-3.713.064 6.155 7.972"></path>
        </g>
      </svg>
    </a>
  </div>
</footer>
<script src="https://cdnjs.cloudflare.com/ajax/libs/tocbot/4.1.1/tocbot.min.js"></script>
<script src="../../_/js/site.js"></script>
<script src="../../_/js/vendor/highlight.js"></script>
<script>hljs.initHighlighting()</script>
<script>
  tocbot.init( {
                 tocSelector: '#article-toc',
                 contentSelector: 'article',
                 headingSelector: 'h2, h3, h4',
                 collapseDepth: 3,
                 positionFixedSelector: '#article-toc',
                 scrollSmooth: false
               } );
  var tocList = document.getElementById( 'article-toc' ).getElementsByClassName( 'toc-list' );
  if ( tocList && tocList.length > 0 && tocList[0].childNodes.length > 0 ) {
    document.getElementById( 'article-toc' ).parentNode.classList.remove( 'hidden' );
  }
</script>
  </body>
</html>
